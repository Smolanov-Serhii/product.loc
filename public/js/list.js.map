{"version":3,"file":"/js/list.js","mappings":"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","sources":["webpack:///./resources/js/app.js","webpack:///webpack/bootstrap","webpack:///./resources/js/blocks/list.js"],"sourcesContent":["const token = $('meta[name=\"csrf-token\"]').attr('content');\r\nconst upload_link = '/admin/upload/image';\r\n\r\nfunction uploadImage(image, editor) {\r\n\r\n    var data = new FormData();\r\n\r\n    data.append(\"image\", image);\r\n    data.append('_token', token);\r\n\r\n    $.ajax({\r\n        url: upload_link,\r\n        cache: false,\r\n        contentType: false,\r\n        processData: false,\r\n        data: data,\r\n        type: \"post\",\r\n        success: function(data) {\r\n\r\n            let image = `<picture>\r\n                <source srcSet=\"/uploads/${data.urls['webp']}\" type=\"image/webp\">\r\n                <img src=\"/uploads/${data.urls['original']}\" alt=\"описание\"/>\r\n            </picture>`;\r\n\r\n            $(editor).summernote(\"pasteHTML\", image);\r\n        },\r\n        error: function(data) {\r\n            console.log('error', data);\r\n        }\r\n    });\r\n}\r\n\r\nconst summernote_config = {\r\n    toolbar: [\r\n        ['style', ['style']],\r\n        ['font', ['bold', 'underline', 'clear']],\r\n        ['fontname', ['fontname']],\r\n        ['fontsize', ['fontsize']],\r\n        ['color', ['color']],\r\n        ['para', ['ul', 'ol', 'paragraph']],\r\n        ['table', ['table']],\r\n        ['insert', ['link', 'picture', 'video']],\r\n        ['view', ['fullscreen', 'codeview', 'help']],\r\n    ],\r\n    popover: false,\r\n    callbacks: {\r\n        onImageUpload: function(files) {\r\n            uploadImage(files[0], this);\r\n        }\r\n    },\r\n};\r\n\r\nmodule.exports = {\r\n    module: {\r\n        rules: [\r\n            {\r\n                // You can use `regexp`\r\n                // test: /vendor\\.js/$\r\n                test: /\\.css$/,\r\n                loader: 'exports-loader',\r\n                use: ['style-loader', 'css-loader']\r\n                // options: {\r\n                //     exports: 'myFunction',\r\n                // },\r\n            },\r\n        ],\r\n    },\r\n    token: token,\r\n    summernote_config: summernote_config\r\n};\r\n\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const { token, summernote_config } = require('../app.js');\r\n\r\n// ************\r\n// ************\r\n// REMOVE BLOCK\r\n// ************\r\n// ************\r\n\r\n$(document).on('click', '.remove-block', function (e) {\r\n    e.preventDefault();\r\n    var delete_button = $('#deleteBlock')[0];\r\n    delete_button.dataset.url = this.dataset.url;\r\n    delete_button.dataset.block_id = this.dataset.block_id;\r\n    return ;\r\n})\r\n\r\n\r\n$('#deleteBlock').on('click', function () {\r\n    var block_id = this.dataset.block_id;\r\n    $.ajax({\r\n        method: 'POST',\r\n        url: this.dataset.url,\r\n        data: {\r\n            _token: token\r\n        },\r\n        success: function (data) {\r\n            $('#confirmDeleteBlock').modal('hide');\r\n            $(`#${block_id}`).remove();\r\n            $(document).Toasts('create', {\r\n                class: 'bg-danger',\r\n                title: 'Статус',\r\n                subtitle: 'OK',\r\n                body: 'Блок удален',\r\n                autohide: true,\r\n                delay: 2e3,\r\n            })\r\n        }\r\n    })\r\n})\r\n\r\n// ************\r\n// ************\r\n// EDIT BLOCK CONTENT\r\n// ************\r\n// ************\r\n\r\n$(document).on('click', '.edit-content', function (e) {\r\n    $('#form_spiner').show();\r\n    $('.carousel').carousel()\r\n    // console.log(e);\r\n    // console.log(this.dataset.url);\r\n    // return false;\r\n    $.ajax({\r\n        method: 'get',\r\n        url: this.dataset.url,\r\n        // data: method == 'post' ? {'_token': token} : {},\r\n        success: function (data) {\r\n            $('#form_spiner').hide();\r\n\r\n            $('#modal_body')[0].innerHTML = data.form;\r\n\r\n\r\n            $(\".iterations\").sortable({\r\n                containment: \"parent\",\r\n                items: \"> div\",\r\n                handle: \".move\",\r\n                tolerance: \"pointer\",\r\n                cursor: \"move\",\r\n                opacity: 0.7,\r\n                revert: 300,\r\n                placeholder: \"movable-placeholder\",\r\n                start: function(e, ui) {\r\n                    alert(2)\r\n                    ui.placeholder.height(ui.item[0].clientHeight);\r\n                    ui.placeholder.width(ui.item[0].clientWidth * .8);\r\n                },\r\n                update: function( event, ui ) {\r\n                    alert(0)\r\n                    for (let i = 0; i < event.target.children.length; i++) {\r\n                        $(event.target.children[i]).find('input.order')[0].value = i+1;\r\n                    }\r\n                },\r\n            });\r\n            // $(\".iterations\").disableSelection();\r\n            $('.editor').each(function (element) {\r\n                var id = this.id;\r\n                $(`#${id}`).summernote(summernote_config);\r\n                $(`#${id}`)[0].value = $(`#${id}`).summernote('code');\r\n                $(`#${id}`).on(\"summernote.change\", function (e) {   // callback as jquery custom event\r\n                    $(`#${id}`)[0].value = $(`#${id}`).summernote('code');\r\n                });\r\n            })\r\n            // $(\".iterations\").sortable({\r\n            //     items: \"> div\",\r\n            //     tolerance: \"pointer\",\r\n            //     containment: \"parent\",\r\n            //     cursor: \"move\",\r\n            //     opacity: 0.7,\r\n            //     revert: 300,\r\n            //     delay: 150,\r\n            //     placeholder: \"movable-placeholder\",\r\n            //     start: function(e, ui) {\r\n            //         ui.placeholder.height(ui.helper.outerHeight());\r\n            //     },\r\n            //\r\n            // });\r\n\r\n        }\r\n    })\r\n})\r\n\r\n// ************\r\n// ************\r\n// UPDATE BLOCK STATUS\r\n// ************\r\n// ************\r\n\r\n$(document).on('change', '.enable-block-switcher', function (){\r\n    var switcher = this, class_name, body;\r\n    $(`#${this.dataset.block_id} .overlay`).show();\r\n    $.ajax({\r\n        method: 'POST',\r\n        url: this.dataset.url,\r\n        data: {\r\n            _token: token,\r\n            enabled: this.checked*1\r\n        },\r\n        success: function (data) {\r\n            // $(`#${switcher.dataset.block_id}`)[0].outerHTML = data.html;\r\n            if(switcher.checked) {\r\n                class_name = 'bg-success';\r\n                body = 'Блок включен';\r\n            } else {\r\n                class_name = 'bg-danger';\r\n                body = 'Блок выключен';\r\n            }\r\n\r\n            $('#blockList').sortable('destroy');\r\n            $('#blockList')[0].outerHTML = data.html;\r\n            refreshSortable();\r\n\r\n            $(document).Toasts('create', {\r\n                class: class_name,\r\n                title: 'Статус',\r\n                subtitle: 'OK',\r\n                body: body,\r\n                autohide: true,\r\n                delay: 2e3,\r\n            })\r\n        }\r\n    })\r\n})\r\n\r\n$(document).on('click', '.save-content', function (e) {\r\n    $('#form_spiner').show();\r\n    var close_form = this.dataset.close_form;\r\n    var form = $('#contentForm')[0];\r\n    // $('.textarea .ql-editor').each(function () {\r\n    $('.editor').each(function () {\r\n        var id = this.id;\r\n        // console.log($(`#${id}`));\r\n        $(`#${id}`)[0].value = $(`#${id}`).summernote('code');\r\n        // $(`#hidden_${this.id}`)[0].value = Quill.find(this).root.innerHTML\r\n        // console.log(this.innerHTML)\r\n    })\r\n\r\n    // for(data_id in CKEDITOR.instances) {\r\n    //     let data =  CKEDITOR.instances[data_id].getData();\r\n    //     let textarea_element = $(`#${data_id}`)[0];\r\n    //\r\n    //     textarea_element.value = data;\r\n    // }\r\n    // CKEDITOR.instances.each(function () {\r\n    //\r\n    // })\r\n    var formData = new FormData(form);\r\n    formData.append('_token', token)\r\n    $.ajax({\r\n        method: 'POST',\r\n        url: form.action,\r\n        data: formData,\r\n        dataType:'JSON',\r\n        contentType: false,\r\n        cache: false,\r\n        processData: false,\r\n        success: function (data) {\r\n            $('#form_spiner').hide();\r\n            // console.log(data);\r\n            if(data.errors) {\r\n\r\n                // alert.show()\r\n                // $.each(data.errors, function (key,value) {\r\n                //     alert.append(`<p>${value}</p>`);\r\n                // })\r\n            } else if(data.status) {\r\n                if(close_form) {\r\n                    $('#contentFormModal').modal('toggle');\r\n                }\r\n                $(document).Toasts('create', {\r\n                    class: data.toasts.class,\r\n                    title: data.toasts.title,\r\n                    body: data.toasts.body,\r\n                    position: 'bottomRight',\r\n                })\r\n            }\r\n        }\r\n    })\r\n})\r\n\r\n$(document).on('click', '.add-iteration', function (e) {\r\n    $.ajax({\r\n        method: 'GET',\r\n        url: this.dataset.template_url,\r\n        success: (data) => {\r\n            let element = document.createElement('template');\r\n            let id = `template_${parseInt(Math.random()*1e5)}`;\r\n\r\n            this.previousElementSibling.append(element);\r\n            element.outerHTML = data.html;\r\n\r\n            // console.log(this.previousElementSibling)\r\n            for (let i = 0; i < this.previousElementSibling.children.length; i++) {\r\n                $(this.previousElementSibling.children[i]).find('input.order')[0].value = i+1;\r\n            }\r\n            // $('.iterations').each((i, e) => {\r\n            //     console.log(i,e)\r\n            // })\r\n            // for (let i = 0; i < event.target.children.length; i++) {\r\n            //     $(event.target.children[i]).find('input.order')[0].value = i+1;\r\n            // }\r\n\r\n\r\n            $(`#option_editor_${data.u_id} .editor`).each(function (element) {\r\n                var id = this.id;\r\n                $(`#${id}`).summernote(summernote_config);\r\n                $(`#${id}`)[0].value = $(`#${id}`).summernote('code');\r\n                $(`#${id}`).on(\"summernote.change\", function (e) {   // callback as jquery custom event\r\n                    $(`#${id}`)[0].value = $(`#${id}`).summernote('code');\r\n                });\r\n            })\r\n        }\r\n    })\r\n})\r\n\r\n$(document).on('change','.custom-file-input', function (){\r\n    var id = this.dataset.id;\r\n    var fr = new FileReader();\r\n    var selectedFile = this.files[0];\r\n\r\n    if (selectedFile) {\r\n        fr.readAsDataURL(selectedFile)\r\n        fr.onload = function(e) {\r\n            var img = document.getElementById(`image_${id}`)\r\n            $(img).show();\r\n            img.src = this.result\r\n        }\r\n    }\r\n})\r\n\r\n// ************\r\n// ************\r\n// SORT AND DRAG BLOCK\r\n// ************\r\n// ************\r\n\r\nfunction refreshSortable() {\r\n    $( \"#blockList\" ).sortable({\r\n        revert: true,\r\n        update: function( event, ui ) {\r\n            var sortedIDs = $( \"#blockList\" ).sortable( \"toArray\" );\r\n            $.ajax({\r\n                method: 'POST',\r\n                url: block_update_order_form_action,\r\n                data: {\r\n                    _token: token,\r\n                    sequence: sortedIDs\r\n                },\r\n                success: function (data) {\r\n                    $('#blockList').sortable('destroy');\r\n                    $('#blockList')[0].outerHTML = data.html;\r\n                    refreshSortable();\r\n                    $(document).Toasts('create', {\r\n                        class: 'bg-success',\r\n                        title: 'Статус',\r\n                        subtitle: 'OK',\r\n                        body: 'Последовательность блоков на странице успешно изменена',\r\n                        autohide: true,\r\n                        delay: 2e3,\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    }).disableSelection();\r\n}\r\nrefreshSortable();\r\n\r\n$( \".template-item\" ).draggable({\r\n    connectToSortable: \"#blockList\",\r\n    helper: \"clone\",\r\n    stop: function( event, ui ) {\r\n        $.ajax({\r\n            method: 'POST',\r\n            url: block_create_content_form_action,\r\n            data: {\r\n                _token: token,\r\n                enabled: 1,\r\n                block_template_id: event.target.dataset.template_id\r\n            },\r\n            success: function (data) {\r\n                if(data.errors) {\r\n\r\n                } else if(data.status) {\r\n                    $('#blockList').sortable('destroy');\r\n                    ui.helper[0].innerHTML = data.html;\r\n                    ui.helper[0].id = data.block_id;\r\n\r\n                    refreshSortable();\r\n                }\r\n            }\r\n        })\r\n    }\r\n});\r\n\r\n\r\n$(document).on('click', '.content.remove-iteration', function (e) {\r\n    e.preventDefault()\r\n\r\n    if(confirm('Are you sure?')) {\r\n        $.ajax({\r\n            method: 'DELETE',\r\n            data: {\r\n                _token: token,\r\n            },\r\n            url: this.dataset.url,\r\n            success: (data) => {\r\n                $(`#${data.id}`).remove();\r\n                $(document).Toasts('create', {\r\n                    class: data.toasts.class,\r\n                    title: data.toasts.title,\r\n                    body: data.toasts.body,\r\n                    position: 'bottomRight',\r\n                })\r\n            }\r\n        })\r\n    }\r\n    return false;\r\n})\r\n\r\n$(document).on('click', '.content.remove-new-iteration', function (e) {\r\n    e.preventDefault();\r\n    $(`#${this.dataset.id}`).remove();\r\n    return false;\r\n})\r\n\r\n\r\n$(document).on('click', '.block.clear-value', function () {\r\n    $(`#optionFile_${this.dataset.attr_id}`)[0].value = '';\r\n    $(`#image_${this.dataset.attr_id}`)[0].src = '';\r\n    $(`#image_${this.dataset.attr_id}`).hide();\r\n    $('#contentForm').append(`<input type=\"hidden\" name=\"clear_value[]\" value=\"${this.dataset.prop_id}\">`);\r\n})\r\n"],"names":["token","$","attr","summernote_config","toolbar","popover","callbacks","onImageUpload","files","image","editor","data","this","FormData","append","ajax","url","cache","contentType","processData","type","success","urls","summernote","error","console","log","module","exports","rules","test","loader","use","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","require","refreshSortable","sortable","revert","update","event","ui","sortedIDs","method","block_update_order_form_action","_token","sequence","outerHTML","html","document","Toasts","class","title","subtitle","body","autohide","delay","disableSelection","on","e","preventDefault","delete_button","dataset","block_id","modal","remove","show","carousel","hide","innerHTML","form","containment","items","handle","tolerance","cursor","opacity","placeholder","start","alert","height","item","clientHeight","width","clientWidth","i","target","children","length","find","value","each","element","id","class_name","switcher","enabled","checked","close_form","formData","action","dataType","errors","status","toasts","position","template_url","createElement","parseInt","Math","random","previousElementSibling","u_id","fr","FileReader","selectedFile","readAsDataURL","onload","img","getElementById","src","result","draggable","connectToSortable","helper","stop","block_create_content_form_action","block_template_id","template_id","confirm","attr_id","prop_id"],"sourceRoot":""}